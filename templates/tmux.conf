#
# Poor man's HUD for Ember nodes.
# Render the active session, host, repo path, and recent activity directly in
# the tmux status line so operators can glance at node health.
#

set -g mouse on
setw -g mode-keys vi

set -g status on
set -g status-position top
set -g status-interval 2
set -g status-style bg=colour234,fg=colour250
set -g status-left-length 80
set -g status-right-length 140

set -g @ember_repo "{{REPO_DIR}}"
set -g @ember_vault "{{VAULT_DIR}}"

set -g status-left '#[fg=colour214,bold]EMBER #[fg=colour39]#{session_name} #[fg=colour244]| #[fg=colour39]#{host} #[fg=colour244]| #[fg=colour39]#{pane_current_path}'
set -g status-right '#( {{REPO_DIR}}/scripts/tmux_battery.sh ) #[fg=colour244]| #[fg=colour39]#{pane_current_command} #[fg=colour244]| #[fg=colour39]#{@ember_vault} #[fg=colour244]| #[fg=colour39]%a %b %d %H:%M'

set -g pane-border-style fg=colour238
set -g pane-active-border-style fg=colour39
set -g message-style bg=colour39,fg=colour231

# Use a consistent prefix to avoid collisions with other tmux configs.
set -g prefix C-a
unbind C-b
bind C-a send-prefix

set -g default-shell /bin/zsh
set -g default-command '{{REPO_DIR}}/scripts/tmux_pane.sh'
